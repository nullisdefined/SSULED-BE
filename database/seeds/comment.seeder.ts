import { DataSource } from 'typeorm';
import { Seeder } from 'typeorm-extension';
import { Comment } from '@/entities/comment.entity';
import { Post } from '@/entities/post.entity';
import { User } from '@/entities/user.entity';
import { Group } from '@/entities/group.entity';
import { Logger } from 'winston';
import { LoggerService } from '@/utils/logger.service';

export class CommentSeeder implements Seeder {
  private readonly logger: Logger = LoggerService.getInstance().logger;

  public async run(dataSource: DataSource): Promise<void> {
    const commentRepository = dataSource.getRepository(Comment);
    const postRepository = dataSource.getRepository(Post);
    const userRepository = dataSource.getRepository(User);
    const groupRepository = dataSource.getRepository(Group);

    const posts = await postRepository.find();
    const users = await userRepository.find();
    const groups = await groupRepository.find();

    if (posts.length === 0 || users.length === 0) {
      this.logger.warn(
        'ê²Œì‹œê¸€ ë˜ëŠ” ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤. ëŒ“ê¸€ ìƒì„±ì„ ê±´ë„ˆëœë‹ˆë‹¤.',
      );
      return;
    }

    // ì‚¬ìš©ìë³„ ì†Œì† ê·¸ë£¹ ë§¤í•‘
    const userGroupMapping: { [userUuid: string]: string[] } = {};
    groups.forEach((group) => {
      group.memberUuid.forEach((memberUuid) => {
        if (!userGroupMapping[memberUuid]) {
          userGroupMapping[memberUuid] = [];
        }
        userGroupMapping[memberUuid].push(group.title);
      });
    });

    // ì¹´í…Œê³ ë¦¬ë³„ ëŒ“ê¸€ í…œí”Œë¦¿
    const commentTemplates = {
      // í™ˆíŠ¸ ê´€ë ¨ ëŒ“ê¸€
      í™ˆíŠ¸: [
        'ì§‘ì—ì„œë„ ì´ë ‡ê²Œ ì—´ì‹¬íˆ í•˜ì‹œëŠ”êµ°ìš”! ëŒ€ë‹¨í•´ìš” ğŸ‘',
        'í™ˆíŠ¸ ë£¨í‹´ ê³µìœ í•´ì£¼ì„¸ìš”!',
        'ì €ë„ í™ˆíŠ¸ ì‹œì‘í•´ë³¼ê²Œìš” ğŸ’ª',
        'ê¾¸ì¤€í•¨ì´ ìµœê³ ì£ ! í™”ì´íŒ…!',
        'ì–´ë–¤ ìš´ë™ ì•± ì‚¬ìš©í•˜ì‹œë‚˜ìš”?',
        'ê³µê°„ì´ ë„“ì§€ ì•Šì•„ë„ ë˜ë‚˜ìš”?',
        'ìš´ë™ ë§¤íŠ¸ ì¶”ì²œ ë¶€íƒë“œë ¤ìš”',
        '30ì¼ ë„ì „ ì €ë„ ë”°ë¼í•´ë³¼ê²Œìš”!',
        'ì§‘ì—ì„œ í•˜ëŠ” ê²Œ ì´ë ‡ê²Œ íš¨ê³¼ì ì´êµ°ìš”',
        'ì‹œê°„ ì ˆì•½ë˜ê³  ì¢‹ì„ ê²ƒ ê°™ì•„ìš”',
      ],

      // ì›¨ì´íŠ¸ ê´€ë ¨ ëŒ“ê¸€
      ì›¨ì´íŠ¸: [
        'ë¬´ê²Œ ëª‡ í‚¤ë¡œì¸ê°€ìš”?',
        'í¼ì´ ì •ë§ ì¢‹ì•„ë³´ì—¬ìš”!',
        'ì €ë„ ë²¤ì¹˜í”„ë ˆìŠ¤ ë°°ìš°ê³  ì‹¶ì–´ìš”',
        'ì–´ë–¤ í”„ë¡œê·¸ë¨ ë”°ë¼í•˜ì‹œë‚˜ìš”?',
        'í—¬ìŠ¤ì¥ ë¶„ìœ„ê¸° ì¢‹ì•„ë³´ì´ë„¤ìš”',
        'ìš´ë™ìì„¸ ê¼¼ê¼¼íˆ ë´ì£¼ì„¸ìš”!',
        'ì ì§„ì  ê³¼ë¶€í•˜ê°€ ì¤‘ìš”í•˜ì£ ',
        'ë‹¨ë°±ì§ˆ ì„­ì·¨ë„ ì‹ ê²½ì“°ì„¸ìš”',
        'ê·¼ìœ¡ëŸ‰ ëŠ˜ê³  ìˆëŠ” ê²Œ ë³´ì—¬ìš”',
        'ì˜¤ìš´ì™„ ì¸ì¦ ë©‹ìˆì–´ìš” ğŸ”¥',
      ],

      // ìš”ê°€ ê´€ë ¨ ëŒ“ê¸€
      ìš”ê°€: [
        'ìì„¸ê°€ ì •ë§ ìš°ì•„í•´ìš” âœ¨',
        'ìœ ì—°ì„±ì´ ë¶€ëŸ¬ì›Œìš”',
        'ë§ˆìŒì˜ í‰í™”ê°€ ëŠê»´ì ¸ìš”',
        'ìš”ê°€ ë§¤íŠ¸ ì–´ë””ì„œ êµ¬ë§¤í•˜ì…¨ë‚˜ìš”?',
        'í˜¸í¡ì´ ì¤‘ìš”í•˜ë‹¤ê³  í•˜ë˜ë°',
        'ëª…ìƒ íš¨ê³¼ë„ ìˆì„ ê²ƒ ê°™ì•„ìš”',
        'ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œì— ì¢‹ê² ë„¤ìš”',
        'ì–´ë–¤ ìš”ê°€ ìŠ¤íƒ€ì¼ì¸ê°€ìš”?',
        'ì´ˆë³´ë„ ë”°ë¼í•  ìˆ˜ ìˆì„ê¹Œìš”?',
        'ì •ë§ íë§ë˜ëŠ” ê²ƒ ê°™ì•„ìš” ğŸ§˜â€â™€ï¸',
      ],

      // ëŸ¬ë‹ ê´€ë ¨ ëŒ“ê¸€
      ëŸ¬ë‹: [
        'ëª‡ í‚¬ë¡œ ë›°ì…¨ë‚˜ìš”?',
        'í˜ì´ìŠ¤ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?',
        'ìƒˆë²½ ëŸ¬ë‹ ì •ë§ ëŒ€ë‹¨í•´ìš”!',
        'í•œê°• ì½”ìŠ¤ ì¢‹ì£ ',
        'ìš´ë™í™” ì¶”ì²œí•´ì£¼ì„¸ìš”',
        'ëŸ¬ë‹ ì–´í”Œ ì‚¬ìš©í•˜ì‹œë‚˜ìš”?',
        'ë‚ ì”¨ ì¢‹ì„ ë•Œ ë›°ëŠ” ê²Œ ìµœê³ ì£ ',
        'ë¶€ìƒ ì¡°ì‹¬í•˜ì„¸ìš”!',
        'ëª©í‘œ ê±°ë¦¬ê°€ ìˆìœ¼ì‹ ê°€ìš”?',
        'ëŸ¬ë‹ í›„ ìŠ¤íŠ¸ë ˆì¹­ ê¼­ í•˜ì„¸ìš”',
      ],

      // í¬ë¡œìŠ¤í• ê´€ë ¨ ëŒ“ê¸€
      í¬ë¡œìŠ¤í•: [
        'WOD ì •ë§ í˜ë“¤ì–´ ë³´ì—¬ìš”',
        'ì „ì‹ ìš´ë™ íš¨ê³¼ ì§±ì´ì£ ',
        'í¬ë¡œìŠ¤í• ë°•ìŠ¤ ì–´ë””ì¸ê°€ìš”?',
        'ì»¨ë””ì…˜ ê´€ë¦¬ ì–´ë–»ê²Œ í•˜ì‹œë‚˜ìš”?',
        'ì²´ë ¥ì´ ì •ë§ ì¢‹ì•„ì§€ê² ì–´ìš”',
        'í¼ ì²´í¬ ë°›ìœ¼ë©´ì„œ í•˜ì„¸ìš”',
        'ë¬´ë¦¬í•˜ì§€ ë§ˆì‹œê³  ì ì§„ì ìœ¼ë¡œ!',
        'ë•€ë²”ë²… ë˜ëŠ” ê²Œ ë³´ì—¬ìš” ğŸ’¦',
        'í¬ë¡œìŠ¤í• ì¤‘ë…ì„± ìˆì£ ',
        'íŒ€ì›Œí¬ë„ ëŠë‚„ ìˆ˜ ìˆì–´ì„œ ì¢‹ì•„ìš”',
      ],

      // ë°°ë“œë¯¼í„´ ê´€ë ¨ ëŒ“ê¸€
      ë°°ë“œë¯¼í„´: [
        'ìŠ¤ë§¤ì‹œ í¼ì´ ë©‹ìˆì–´ìš”!',
        'ë¼ì¼“ ë¸Œëœë“œê°€ ë­”ê°€ìš”?',
        'ë°œë†€ë¦¼ì´ ê°€ë²¼ì›Œ ë³´ì—¬ìš”',
        'ë³µì‹? ë‹¨ì‹?',
        'ì…”í‹€ì½• ë§ì´ ë“œì‹œê² ì–´ìš”',
        'ë°±í•¸ë“œ ì–´ë ¤ìš´ë° ì˜í•˜ì‹œë„¤ìš”',
        'ì²´ìœ¡ê´€ ë°”ë‹¥ì´ ì¢‹ì•„ë³´ì—¬ìš”',
        'ê²½ê¸° ê²°ê³¼ ê¶ê¸ˆí•´ìš”',
        'ë‹¤ìŒì— ê°™ì´ ì³ìš”!',
        'ìš´ë™ëŸ‰ ë§ì•„ì„œ ì¢‹ê² ì–´ìš”',
      ],

      // í…Œë‹ˆìŠ¤ ê´€ë ¨ ëŒ“ê¸€
      í…Œë‹ˆìŠ¤: [
        'ë°±í•¸ë“œ ë°°ìš°ê³  ì‹¶ì–´ìš”',
        'ë¼ì¼“ ìŠ¤íŠ¸ë§ êµì²´ ì£¼ê¸°ëŠ”?',
        'í”„ë¡œ ê²½ê¸° ì§ê´€ ë¶€ëŸ¬ì›Œìš”',
        'í…Œë‹ˆìŠ¤ ë ˆìŠ¨ ë°›ê³  ê³„ì‹ ê°€ìš”?',
        'ì½”íŠ¸ ì˜ˆì•½í•˜ê¸° ì–´ë µì£ ',
        'ì„œë¸Œ ì—°ìŠµ ë§ì´ í•˜ì„¸ìš”',
        'í’‹ì›Œí¬ê°€ ì¤‘ìš”í•˜ë‹¤ê³  í•˜ë˜ë°',
        'í…Œë‹ˆìŠ¤ë³µ ë¸Œëœë“œ ì¶”ì²œí•´ì£¼ì„¸ìš”',
        'ì‹¤ë ¥ ëŠ˜ê³  ìˆëŠ” ê²Œ ë³´ì—¬ìš”',
        'ë™í˜¸íšŒ ë¶„ìœ„ê¸° ì¢‹ì•„ë³´ì—¬ìš”',
      ],

      // ë‹¤ì´ì–´íŠ¸ ê´€ë ¨ ëŒ“ê¸€
      ë‹¤ì´ì–´íŠ¸: [
        'ì‹ë‹¨ ë„ˆë¬´ ê±´ê°•í•´ ë³´ì—¬ìš”',
        'ì¹¼ë¡œë¦¬ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?',
        'ì˜ì§€ë ¥ì´ ëŒ€ë‹¨í•˜ì„¸ìš”',
        'ìš”ë¦¬ë„ ì˜í•˜ì‹œë„¤ìš”',
        'ë‹¨ë°±ì§ˆ ë¹„ìœ¨ì´ ì¢‹ì•„ë³´ì—¬ìš”',
        'ë§›ì—†ì–´ ë³´ì´ì§€ ì•Šì•„ìš”!',
        'ì €ë„ ë”°ë¼í•´ë³¼ê²Œìš”',
        'ê°„ì‹ ì°¸ëŠ” ê²Œ ì œì¼ í˜ë“¤ì–´ìš”',
        'ë³€í™”ê°€ ëˆˆì— ë³´ì—¬ìš”',
        'ëª©í‘œ ì²´ì¤‘ ìˆìœ¼ì‹ ê°€ìš”?',
      ],

      // ìš´ë™ë³µ ê´€ë ¨ ëŒ“ê¸€
      ìš´ë™ë³µ: [
        'ì½”ë”” ë„ˆë¬´ ì˜ˆë»ìš”!',
        'ì–´ë”” ë¸Œëœë“œì¸ê°€ìš”?',
        'ê¸°ëŠ¥ì„±ë„ ì¢‹ì•„ë³´ì—¬ìš”',
        'ì»¬ëŸ¬ ì¡°í•©ì´ ë©‹ì ¸ìš”',
        'ê°€ê²©ëŒ€ê°€ ê¶ê¸ˆí•´ìš”',
        'í•ì´ ì •ë§ ì¢‹ë„¤ìš”',
        'ìš´ë™í•  ë•Œ í¸í•  ê²ƒ ê°™ì•„ìš”',
        'ì˜¨ë¼ì¸ìœ¼ë¡œ êµ¬ë§¤í•˜ì…¨ë‚˜ìš”?',
        'ì‚¬ì´ì¦ˆ ê³ ë¯¼ë˜ëŠ”ë° íŒ ìˆë‚˜ìš”?',
        'ì„¸íƒì€ ì–´ë–»ê²Œ í•˜ì‹œë‚˜ìš”?',
      ],

      // í”„ë¡œí‹´ ê´€ë ¨ ëŒ“ê¸€
      í”„ë¡œí‹´: [
        'ë§›ì´ ì–´ë–¤ê°€ìš”?',
        'ê°€ì„±ë¹„ ì¢‹ì•„ë³´ì—¬ìš”',
        'í•˜ë£¨ì— ëª‡ ìŠ¤ì¿± ë“œì‹œë‚˜ìš”?',
        'ìš°ìœ ë‘ ë¨¹ìœ¼ë©´ ë§›ìˆì£ ',
        'ê·¼ìœ¡ëŸ‰ ëŠ˜ê³  ìˆë‚˜ìš”?',
        'ì†Œí™”ëŠ” ì˜ ë˜ì‹œë‚˜ìš”?',
        'ë‹¤ë¥¸ ë§›ë„ ê¶ê¸ˆí•´ìš”',
        'ìš´ë™ ì „í›„ ì–¸ì œ ë“œì‹œë‚˜ìš”?',
        'ì¶”ì²œ ë ˆì‹œí”¼ ìˆë‚˜ìš”?',
        'íš¨ê³¼ ëŠë¼ì‹œë‚˜ìš”?',
      ],

      // ìˆ˜ì˜ ê´€ë ¨ ëŒ“ê¸€
      ìˆ˜ì˜: [
        'ëª‡ ë¯¸í„° í•˜ì…¨ë‚˜ìš”?',
        'ì–´ë–¤ ì˜ë²•ì¸ê°€ìš”?',
        'ìˆ˜ì˜ë³µ ì¶”ì²œí•´ì£¼ì„¸ìš”',
        'ìˆ˜ì˜ëª¨ ë²—ìœ¼ë©´ ë¨¸ë¦¬ê°€...',
        'ì „ì‹ ìš´ë™ì´ë¼ ì¢‹ì£ ',
        'ê´€ì ˆì— ë¬´ë¦¬ ì•ˆ ê°€ì„œ ì¢‹ì•„ìš”',
        'ì˜¤ë¦¬ë°œ íš¨ê³¼ ìˆë‚˜ìš”?',
        'ìˆ˜ì˜ì¥ ë¬¼ì´ ê¹¨ë—í•´ë³´ì—¬ìš”',
        'ê°•ìŠµ ë°›ìœ¼ì‹œë‚˜ìš”?',
        'ê¸°ë¡ ì¸¡ì •í•˜ì‹œë‚˜ìš”?',
      ],

      // í•„ë¼í…ŒìŠ¤ ê´€ë ¨ ëŒ“ê¸€
      í•„ë¼í…ŒìŠ¤: [
        'ì½”ì–´ ê·¼ìœ¡ì— ì¢‹ê² ì–´ìš”',
        'ìì„¸ êµì • íš¨ê³¼ ìˆë‚˜ìš”?',
        'í˜¸í¡ì´ ì¤‘ìš”í•˜ë‹¤ê³  í•˜ë˜ë°',
        'ì„ ìƒë‹˜ì´ ì˜ ê°€ë¥´ì³ì£¼ì‹œë‚˜ìš”?',
        'ì†Œë„êµ¬ ì‚¬ìš©ë²• ë°°ìš°ê³  ì‹¶ì–´ìš”',
        'ìœ ì—°ì„± ëŠ˜ê³  ìˆë‚˜ìš”?',
        'ë§¤íŠ¸ í•„ë¼í…ŒìŠ¤ì¸ê°€ìš”?',
        'ê¸°êµ¬ í•„ë¼í…ŒìŠ¤ë„ í•´ë³´ì„¸ìš”',
        'ëª¸ì˜ ë³€í™” ëŠë¼ì‹œë‚˜ìš”?',
        'ì§‘ì—ì„œë„ í•  ìˆ˜ ìˆëŠ” ë™ì‘ ìˆë‚˜ìš”?',
      ],

      // ë°”ë””í”„ë¡œí•„ ê´€ë ¨ ëŒ“ê¸€
      ë°”ë””í”„ë¡œí•„: [
        'ëª¸ë§¤ ì •ë§ ì¢‹ì•„ìš”!',
        'ì‹ë‹¨ ê´€ë¦¬ ì–´ë–»ê²Œ í•˜ì‹œë‚˜ìš”?',
        'ìš´ë™ ë£¨í‹´ ê³µìœ í•´ì£¼ì„¸ìš”',
        'ì˜ì§€ë ¥ì´ ëŒ€ë‹¨í•˜ì„¸ìš”',
        'ì‚¬ì§„ê´€ ì–´ë””ì¸ê°€ìš”?',
        'ì¤€ë¹„ ê¸°ê°„ì´ ì–¼ë§ˆë‚˜ ê±¸ë ¸ë‚˜ìš”?',
        'ì»¨ë””ì…˜ ì¡°ì ˆ í˜ë“¤ì£ ',
        'ê²°ê³¼ë¬¼ì´ ê¸°ëŒ€ë¼ìš”',
        'ë™ê¸°ë¶€ì—¬ê°€ ë¼ìš”',
        'ë‹¤ì´ì–´íŠ¸ íŒ ì•Œë ¤ì£¼ì„¸ìš”',
      ],

      // ìŠ¤íŠ¸ë ˆì¹­ ê´€ë ¨ ëŒ“ê¸€
      ìŠ¤íŠ¸ë ˆì¹­: [
        'ë¶€ìƒ ì˜ˆë°©ì— ì¢‹ì£ ',
        'ëª¸ì´ ë¶€ë“œëŸ¬ì›Œì§€ê² ì–´ìš”',
        'ì–´ë–¤ ìŠ¤íŠ¸ë ˆì¹­ì¸ê°€ìš”?',
        'ì‹œê°„ì€ ì–¼ë§ˆë‚˜ í•˜ì‹œë‚˜ìš”?',
        'ê±°ë¶ëª©ì— ë„ì›€ë ê¹Œìš”?',
        'ìš”ê°€ë‘ ë¹„ìŠ·í•œê°€ìš”?',
        'ìš´ë™ ì „í›„ ê¼­ í•´ì•¼ì£ ',
        'ë¼ìš´ë“œìˆ„ë” ê°œì„ ëë‚˜ìš”?',
        'í¼ë¡¤ëŸ¬ë„ ì‚¬ìš©í•˜ì„¸ìš”',
        'ìœ ì—°ì„± í…ŒìŠ¤íŠ¸ í•´ë³´ì„¸ìš”',
      ],

      // ë¼ì´ë”© ê´€ë ¨ ëŒ“ê¸€
      ë¼ì´ë”©: [
        'ìì „ê±° ë¸Œëœë“œê°€ ë­”ê°€ìš”?',
        'ê±°ë¦¬ëŠ” ì–¼ë§ˆë‚˜ ê°€ì…¨ë‚˜ìš”?',
        'ì½”ìŠ¤ê°€ ì¢‹ì•„ë³´ì—¬ìš”',
        'ì•ˆì „ì¥ë¹„ ì°©ìš©í•˜ì„¸ìš”',
        'ë°”ëŒ ë§ìœ¼ë©° ë‹¬ë¦¬ëŠ” ê²Œ ì‹œì›í•˜ì£ ',
        'ì—…í êµ¬ê°„ í˜ë“¤ì£ ',
        'ìì „ê±° ê´€ë¦¬ëŠ” ì–´ë–»ê²Œ í•˜ì‹œë‚˜ìš”?',
        'ë¼ì´ë”©ë³µ ê¸°ëŠ¥ì„± ì¢‹ì•„ë³´ì—¬ìš”',
        'ë‹¨ì²´ ë¼ì´ë”© ì¬ë°Œê² ì–´ìš”',
        'ê²½ì¹˜ êµ¬ê²½í•˜ë©° ìš´ë™í•˜ë‹ˆ ì¢‹ë„¤ìš”',
      ],

      // í´ë¼ì´ë° ê´€ë ¨ ëŒ“ê¸€
      í´ë¼ì´ë°: [
        'ë‚œì´ë„ê°€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?',
        'í´ë¼ì´ë°í™” ì¶”ì²œí•´ì£¼ì„¸ìš”',
        'í™€ë“œ ì¡ëŠ” ë²• ì–´ë ¤ì›Œìš”',
        'ìƒì²´ ê·¼ë ¥ ëŠ˜ê² ì–´ìš”',
        'ë†’ì´ ì˜¬ë¼ê°€ë©´ ë¬´ì„­ì§€ ì•Šë‚˜ìš”?',
        'ë¬¸ì œ í•´ê²°í•˜ëŠ” ì¬ë¯¸ê°€ ìˆì£ ',
        'ì•ˆì „ í™•ë³´ ì˜ í•˜ì„¸ìš”',
        'ì†ëª© ë³´í˜¸ëŒ€ ì‚¬ìš©í•˜ì„¸ìš”',
        'ì‹¤ë‚´ í´ë¼ì´ë°ì¥ì¸ê°€ìš”?',
        'ì •ì‹ ë ¥ë„ ì¤‘ìš”í•˜ê² ì–´ìš”',
      ],

      // íŠ¸ë ˆë“œë°€ ê´€ë ¨ ëŒ“ê¸€
      íŠ¸ë ˆë“œë°€: [
        'ì†ë„ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?',
        'ê²½ì‚¬ë„ ì˜¬ë¦¬ë©´ ë” í˜ë“¤ì£ ',
        'ì‹¤ë‚´ ìš´ë™ì´ë¼ ì¢‹ê² ì–´ìš”',
        'ëŸ¬ë‹ë¨¸ì‹  ë¸Œëœë“œ ë­”ê°€ìš”?',
        'ì§€ë£¨í•˜ì§€ ì•Šë‚˜ìš”?',
        'ìŒì•… ë“¤ìœ¼ë©´ì„œ í•˜ì‹œë‚˜ìš”?',
        'ë¬´ë¦ì— ë¬´ë¦¬ ì—†ë‚˜ìš”?',
        'ì¹¼ë¡œë¦¬ ì†Œëª¨ëŸ‰ì´ ê¶ê¸ˆí•´ìš”',
        'ì¸í„°ë²Œ íŠ¸ë ˆì´ë‹ í•´ë³´ì„¸ìš”',
        'ê¾¸ì¤€íˆ í•˜ëŠ” ê²Œ ìµœê³ ì£ ',
      ],
    };

    // ì¼ë°˜ì ì¸ ê²©ë ¤/ê³µê° ëŒ“ê¸€
    const generalComments = [
      'í™”ì´íŒ…! ğŸ’ª',
      'ëŒ€ë‹¨í•˜ì„¸ìš”!',
      'ì €ë„ ë™ê¸°ë¶€ì—¬ ë°›ê³  ê°‘ë‹ˆë‹¤',
      'ê¾¸ì¤€í•¨ì´ ë‹µì´ì£ ',
      'ë©‹ìˆì–´ìš”!',
      'ë¶€ëŸ¬ì›Œìš”',
      'ì¢‹ì€ ìê·¹ ë°›ê³  ê°‘ë‹ˆë‹¤',
      'ì˜¤ëŠ˜ë„ ìˆ˜ê³ í•˜ì…¨ì–´ìš”',
      'ìµœê³ ì˜ˆìš”!',
      'ì‘ì›í• ê²Œìš”!',
      'ê±´ê°•ì´ ìµœê³ ì£ ',
      'ì²´ë ¥ì´ êµ­ë ¥!',
      'ì •ë§ ë©‹ì ¸ìš”',
      'ì €ë„ ì—´ì‹¬íˆ í•´ì•¼ê² ì–´ìš”',
      'ì¢‹ì€ ì—ë„ˆì§€ ë°›ì•„ê°‘ë‹ˆë‹¤',
      'ì¸ì¦ìƒ· ë³´ê¸° ì¢‹ì•„ìš”',
      'ìš´ë™í•˜ëŠ” ëª¨ìŠµì´ ë©‹ìˆì–´ìš”',
      'ê±´ê°•í•œ í•˜ë£¨ ë³´ë‚´ì„¸ìš”',
      'ì˜¤ìš´ì™„ ì¶•í•˜ë“œë ¤ìš”',
      'ë‚´ì¼ë„ í™”ì´íŒ…!',
    ];

    // ì§ˆë¬¸í˜• ëŒ“ê¸€
    const questionComments = [
      'ëª‡ ì‹œê°„ ìš´ë™í•˜ì…¨ë‚˜ìš”?',
      'ì´ˆë³´ë„ ë”°ë¼í•  ìˆ˜ ìˆì„ê¹Œìš”?',
      'ì–´ë ¤ìš´ ì ì€ ì—†ìœ¼ì…¨ë‚˜ìš”?',
      'ì¤€ë¹„ë¬¼ì´ ë”°ë¡œ ìˆë‚˜ìš”?',
      'ë¹„ìš©ì´ ë§ì´ ë“œë‚˜ìš”?',
      'ì‹œì‘í•˜ê¸° ì „ì— ì•Œì•„ì•¼ í•  ê²Œ ìˆë‚˜ìš”?',
      'ë¶€ìƒ ìœ„í—˜ì€ ì—†ë‚˜ìš”?',
      'íš¨ê³¼ëŠ” ì–¸ì œë¶€í„° ëŠë¼ì…¨ë‚˜ìš”?',
      'ë‹¤ë¥¸ ìš´ë™ê³¼ ë¹„êµí•˜ë©´ ì–´ë–¤ê°€ìš”?',
      'ì¶”ì²œí•˜ê³  ì‹¶ì€ ìš´ë™ì¸ê°€ìš”?',
    ];

    // userUuidë¥¼ userIdë¡œ ë§¤í•‘í•˜ê¸° ìœ„í•œ Map ìƒì„±
    const userUuidToIdMap: { [uuid: string]: number } = {};
    users.forEach((user) => {
      userUuidToIdMap[user.userUuid] = user.id;
    });

    // postUuidë¥¼ postIdë¡œ ë§¤í•‘í•˜ê¸° ìœ„í•œ Map ìƒì„±
    const postUuidToIdMap: { [uuid: string]: number } = {};
    posts.forEach((post) => {
      postUuidToIdMap[post.id] = post.id;
    });

    const comments = [];

    // ê° ê²Œì‹œê¸€ì— ëŒ€í•´ ëŒ“ê¸€ ìƒì„±
    for (const post of posts) {
      // ê²Œì‹œê¸€ë‹¹ 0-8ê°œì˜ ëŒ“ê¸€ ëœë¤ ìƒì„±
      const commentCount = Math.floor(Math.random() * 9);

      // ê²Œì‹œê¸€ ì‘ì„±ìê°€ ì†í•œ ê·¸ë£¹ì˜ ë‹¤ë¥¸ ë©¤ë²„ë“¤ì´ ëŒ“ê¸€ ì‘ì„±
      const postAuthorGroups = userGroupMapping[post.userUuid] || [];
      let potentialCommenters: string[] = [];

      // ì‘ì„±ìì™€ ê°™ì€ ê·¸ë£¹ì˜ ë©¤ë²„ë“¤ ì°¾ê¸°
      groups.forEach((group) => {
        if (postAuthorGroups.includes(group.title)) {
          group.memberUuid.forEach((memberUuid) => {
            if (
              memberUuid !== post.userUuid &&
              !potentialCommenters.includes(memberUuid)
            ) {
              potentialCommenters.push(memberUuid);
            }
          });
        }
      });

      // ê°™ì€ ê·¸ë£¹ ë©¤ë²„ê°€ ì—†ìœ¼ë©´ ì „ì²´ ì‚¬ìš©ì ì¤‘ì—ì„œ ì„ íƒ
      if (potentialCommenters.length === 0) {
        potentialCommenters = users
          .filter((user) => user.userUuid !== post.userUuid)
          .map((user) => user.userUuid);
      }

      // ê²Œì‹œê¸€ ì œëª©/ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ ì¶”ì •
      let category = 'ì¼ë°˜';
      const postContent = `${post.title} ${post.content}`.toLowerCase();

      if (postContent.includes('í™ˆíŠ¸') || postContent.includes('ì§‘ì—ì„œ'))
        category = 'í™ˆíŠ¸';
      else if (
        postContent.includes('ì›¨ì´íŠ¸') ||
        postContent.includes('í—¬ìŠ¤') ||
        postContent.includes('ë²¤ì¹˜') ||
        postContent.includes('ì˜¤ìš´ì™„')
      )
        category = 'ì›¨ì´íŠ¸';
      else if (postContent.includes('ìš”ê°€')) category = 'ìš”ê°€';
      else if (postContent.includes('ëŸ¬ë‹') || postContent.includes('ëŸ°ë‹'))
        category = 'ëŸ¬ë‹';
      else if (postContent.includes('í¬ë¡œìŠ¤í•')) category = 'í¬ë¡œìŠ¤í•';
      else if (postContent.includes('ë°°ë“œë¯¼í„´')) category = 'ë°°ë“œë¯¼í„´';
      else if (postContent.includes('í…Œë‹ˆìŠ¤')) category = 'í…Œë‹ˆìŠ¤';
      else if (postContent.includes('ë‹¤ì´ì–´íŠ¸') || postContent.includes('ì‹ë‹¨'))
        category = 'ë‹¤ì´ì–´íŠ¸';
      else if (postContent.includes('ìš´ë™ë³µ') || postContent.includes('ì½”ë””'))
        category = 'ìš´ë™ë³µ';
      else if (postContent.includes('í”„ë¡œí‹´') || postContent.includes('ë‹¨ë°±ì§ˆ'))
        category = 'í”„ë¡œí‹´';
      else if (postContent.includes('ìˆ˜ì˜') || postContent.includes('ì˜¤ìˆ˜ì™„'))
        category = 'ìˆ˜ì˜';
      else if (postContent.includes('í•„ë¼í…ŒìŠ¤')) category = 'í•„ë¼í…ŒìŠ¤';
      else if (postContent.includes('ë°”ë””í”„ë¡œí•„')) category = 'ë°”ë””í”„ë¡œí•„';
      else if (postContent.includes('ìŠ¤íŠ¸ë ˆì¹­')) category = 'ìŠ¤íŠ¸ë ˆì¹­';
      else if (postContent.includes('ë¼ì´ë”©') || postContent.includes('ìì „ê±°'))
        category = 'ë¼ì´ë”©';
      else if (postContent.includes('í´ë¼ì´ë°')) category = 'í´ë¼ì´ë°';
      else if (postContent.includes('íŠ¸ë ˆë“œë°€')) category = 'íŠ¸ë ˆë“œë°€';

      for (let i = 0; i < commentCount; i++) {
        if (potentialCommenters.length === 0) break;

        // ëŒ“ê¸€ ì‘ì„±ì ëœë¤ ì„ íƒ
        const commenterUuid =
          potentialCommenters[
            Math.floor(Math.random() * potentialCommenters.length)
          ];
        const commenterId = userUuidToIdMap[commenterUuid];
        const postId = postUuidToIdMap[post.id];

        // ID ë§¤í•‘ì´ ì‹¤íŒ¨í•œ ê²½ìš° ê±´ë„ˆë›°ê¸°
        if (!commenterId || !postId) {
          this.logger.warn(
            `ID ë§¤í•‘ ì‹¤íŒ¨: commenterUuid=${commenterUuid}, postUuid=${post.id}`,
          );
          continue;
        }

        // ëŒ“ê¸€ ë‚´ìš© ì„ íƒ (ì¹´í…Œê³ ë¦¬ë³„ 40%, ì¼ë°˜ ê²©ë ¤ 30%, ì§ˆë¬¸ 30%)
        let commentContent: string;
        const rand = Math.random();

        if (rand < 0.4 && commentTemplates[category]) {
          // ì¹´í…Œê³ ë¦¬ë³„ ì „ë¬¸ ëŒ“ê¸€
          const categoryComments = commentTemplates[category];
          commentContent =
            categoryComments[
              Math.floor(Math.random() * categoryComments.length)
            ];
        } else if (rand < 0.7) {
          // ì¼ë°˜ ê²©ë ¤ ëŒ“ê¸€
          commentContent =
            generalComments[Math.floor(Math.random() * generalComments.length)];
        } else {
          // ì§ˆë¬¸í˜• ëŒ“ê¸€
          commentContent =
            questionComments[
              Math.floor(Math.random() * questionComments.length)
            ];
        }

        // ëŒ“ê¸€ ìƒì„± ì‹œê°„ (ê²Œì‹œê¸€ ìƒì„± ì‹œê°„ ì´í›„ 7ì¼ ì´ë‚´)
        const commentDate = new Date(post.createdAt);
        commentDate.setTime(
          commentDate.getTime() + Math.random() * 7 * 24 * 60 * 60 * 1000,
        );

        comments.push({
          userUuid: commenterUuid,
          userId: commenterId,
          postId: postId,
          content: commentContent,
          createdAt: commentDate,
          updatedAt: commentDate,
        });
      }
    }

    // ëŒ“ê¸€ë“¤ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
    comments.sort((a, b) => a.createdAt.getTime() - b.createdAt.getTime());

    // ëŒ“ê¸€ ì €ì¥
    for (const commentData of comments) {
      try {
        const comment = commentRepository.create(commentData);
        await commentRepository.save(comment);

        this.logger.info(
          `ëŒ“ê¸€ ìƒì„± ì™„ë£Œ (ì‘ì„±ì: ${commentData.userUuid.slice(-8)}, ê²Œì‹œê¸€ ID: ${commentData.postId})`,
        );
      } catch (error) {
        this.logger.error(`ëŒ“ê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
      }
    }

    this.logger.info(`ì´ ${comments.length}ê°œì˜ ëŒ“ê¸€ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);
  }
}
